<style>
	td {
		border: 1px solid black;
	}			
</style>
<script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
<script type="text/javascript">
function sendPost(){
    $.ajax({
        url: "http://127.0.0.1:8000/welcome/default/api",
        type: "POST",
        data: {	type: 'send',
                message: 'This is my message from AJAX2',
				to: 'wretzloff@teamA.com',
              },
        dataType: 'text',
        beforeSend: function (xhr){
            //xhr.setRequestHeader('Authorization', make_base_auth('will@teamA.com','1234567890'));
        },
        success: function(data) {
            alert(data);
        },
        error: function(jqXHR, textStatus, errorThrown) {
            alert('Error');
        }
    });
}

function getAllMessages(callbackFunctionOnSuccess){
	$.ajax({
        url: "http://127.0.0.1:8000/welcome/default/api",
        type: "GET",
        data: {	table: 'messages', message_id: 'all'},
        dataType: 'text',
        beforeSend: function (xhr){
            //xhr.setRequestHeader('Authorization', make_base_auth('wretzloff@teamA.com','abcd1234'));
        },
        success: callbackFunctionOnSuccess,
        error: function(jqXHR, textStatus, errorThrown) {
            alert('Error');
        }
    });
	
	return returnData;
}

function sendDelete(){
    $.ajax({
        url: "http://127.0.0.1:8000/welcome/default/api",
        type: "DELETE",
        data: {	table: 'messages', message_id: 3},
        dataType: 'text',
        beforeSend: function (xhr){
            //xhr.setRequestHeader('Authorization', make_base_auth('wretzloff@teamA.com','abcd1234'));
        },
        success: function(data) {
            alert(data);
        },
        error: function(jqXHR, textStatus, errorThrown) {
            alert('Error');
        }
    });
}

function make_base_auth(user, password){
    var tok = user + ':' + password;
    var hash = btoa(tok);
    return 'Basic ' + hash;
}

function getSuccessfulCallbackFunction(resultFromGetRequest) 
{
	$('#tempElement').html(resultFromGetRequest);
}

$(document).ready(function(){
	//Call the Get Messages service to retrieve all messages for this user and use the results to update the page.
	getAllMessages(getSuccessfulCallbackFunction);
});
</script>

{{extend 'layout.html'}}
<table id='messageTable' style="width:95%">
	<tr>
		<td style="text-align:center;font-size: 32px;">Sender</td>
		<td style="text-align:center;font-size: 32px;">Message</td>
	</tr>
</table>
<h1 id='tempElement'></h1>

